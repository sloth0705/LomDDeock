{"version":3,"file":"static/js/2589.1c4b88e6.chunk.js","mappings":"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","sources":["store/Auth.js","pages/user/Login.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\n\r\nexport const TOKEN_TIME_OUT = 600*1000;\r\n\r\nexport const tokenSlice = createSlice({\r\n    name: 'authToken',\r\n    initialState: {\r\n        authenticated: false,\r\n        accessToken: null,\r\n        expireTime: null\r\n    },\r\n    reducers: {\r\n        SET_TOKEN: (state, action) => {\r\n            state.authenticated = true;\r\n            state.accessToken = action.payload;\r\n            state.expireTime = new Date().getTime() + TOKEN_TIME_OUT;\r\n        },\r\n        DELETE_TOKEN: (state) => {\r\n            state.authenticated = false;\r\n            state.accessToken = null;\r\n            state.expireTime = null\r\n        },\r\n    }\r\n})\r\n\r\nexport const { SET_TOKEN, DELETE_TOKEN } = tokenSlice.actions;\r\n\r\nexport default tokenSlice.reducer;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useNavigate } from 'react-router';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {Navbar, Container, Row, Col, Button, Form, Image} from \"react-bootstrap\";\r\nimport KakaoLogin from \"react-kakao-login\";\r\n/* interceptor에서 헤더에 토큰을 자동으로 장착해주는 axios */\r\nimport axios from '../../interceptor.js';\r\nimport getUserInfo from '../../getUserInfo';\r\nimport { setRefreshToken } from '../../storage/Cookie';\r\nimport { SET_TOKEN } from '../../store/Auth';\r\nimport '../../css/user/user.css';\r\nimport logo from \"../../images/LomDDeock-letterlogo-korean.png\";\r\n\r\nfunction Login() {\r\n    const dispatch = useDispatch();\r\n    const state = useSelector((state) => state);\r\n    const navigate = useNavigate();\r\n    // 카카오 로그인 clientId\r\n    const kakaoClientId = '9169f348c8c5bb0b3fc8f2e08db92d78'\r\n\r\n    // 카카오 로그인 API 성공 시 호출\r\n    const kakaoOnSuccess = async (data)=>{\r\n        localStorage.setItem(\"kakao_token\", data.response.access_token);\r\n        const idToken = data.response.access_token  // 엑세스 토큰 백엔드로 전달\r\n        const email = data.profile.kakao_account.email;\r\n        // 해당 메일로 만들어진 계정이 있는지 확인\r\n        const check = await performCheck(email);\r\n        if (check) {\r\n            // 계정이 없을경우 새로 생성\r\n            signUp(email);\r\n        }\r\n        // 계정 로그인\r\n        signIn(email);\r\n    }\r\n    // 카카오 로그인 API 실패 시 호출\r\n    const kakaoOnFailure = (error) => {\r\n        console.log(error);\r\n        alert('로그인에 실패하였습니다. 잠시 후 다시 시도해주세요.')\r\n    };\r\n    // 카카오 로그인 시 해당 계정이 서버에 등록 된 계정인지 확인\r\n    const performCheck = async (email) => {\r\n        return axios.get('/api/social/check/KAKAO?email=' + email)\r\n            .then((res) => {\r\n                // true or false를 리턴한다\r\n                return res.data;\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error during check:\", error);\r\n                throw error;\r\n            });\r\n    }\r\n    // 소셜 로그인 시 해당 메일로 등록된 계정이 없을 경우 계정 가입\r\n    const signUp = async (email) => {\r\n        try {\r\n            const response = await axios.post('/api/social/signup', {\r\n                email: email\r\n            });\r\n        } catch (error) {\r\n            // 오류가 발생한 경우의 추가 로직\r\n            console.error('Error during sign-up:', error);\r\n        }\r\n    }\r\n    // 소셜 로그인 토큰 발행\r\n    const signIn = async (email) => {\r\n        try {\r\n            const response = await axios.post('/api/social/signin', {\r\n                email: email\r\n            });\r\n            localStorage.setItem(\"email\", email);\r\n            // localStorage에 token이라는 이름으로 accessToken을 발행\r\n            localStorage.setItem(\"token\", response.data.accessToken);\r\n            setRefreshToken(response.data.refreshToken);\r\n            console.log('accessToken: ' + response.data.accessToken);\r\n            // 로그인 성공 후 메인 페이지로 이동\r\n            navigate(\"/\");\r\n        } catch (error) {\r\n            // 오류가 발생한 경우의 추가 로직\r\n            console.error('Error during sign-in:', error);\r\n        }\r\n    }\r\n\r\n    // 각종 함수 테스트용으로 실행(현재 토큰을 넘겨 사용자 정보를 받는 용도로 사용중...)\r\n    const test = async () => {\r\n    console.log(state)\r\n        try {\r\n            const response = await axios.get('/api/info');\r\n        } catch (error) {\r\n            // 오류가 발생한 경우의 추가 로직\r\n            console.error('Error during sign-in:', error);\r\n        }\r\n    }\r\n    return (\r\n        <Container className=\"mt-4\">\r\n            <Row>\r\n                <Col md={{ span: 5, offset: 3 }} id=\"loginCol\">\r\n                    <div className=\"d-flex justify-content-center\">\r\n                        <Image src={logo} alt=\"로고\" className=\"logo\"/>\r\n                    </div>\r\n                    <h2 class=\"title\">로그인</h2>\r\n\r\n                    <div>\r\n\r\n                    <li id=\"kkLoginBtn\">\r\n                        <KakaoLogin\r\n                              token={kakaoClientId}\r\n                              onSuccess={kakaoOnSuccess}\r\n                              onFail={kakaoOnFailure}\r\n                              className=\"w100p kkLogin\"\r\n                          />\r\n                    </li>\r\n                    <li id=\"nvLoginBtn\">\r\n                        <a href=\"#\">네이버 로그인</a>\r\n                    </li>\r\n                    <li id=\"ggLoginBtn\">\r\n                        <a href=\"#\">구글 로그인</a>\r\n                    </li>\r\n                        <strong>또는</strong>\r\n                        <button onClick={() => test()}>test</button>\r\n                    </div>\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                            <Form.Label>아이디</Form.Label>\r\n                            <Form.Control type=\"email\" placeholder=\"이메일 주소 입력\" />\r\n                            <Form.Text className=\"text-muted\">\r\n\r\n                            </Form.Text>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                            <Form.Label>비밀번호</Form.Label>\r\n                            <Form.Control type=\"password\" placeholder=\"비밀번호 입력\" />\r\n                        </Form.Group>\r\n                        <Form.Group className=\"mb-3\" controlId=\"formBasicCheckbox\">\r\n                            <Form.Check type=\"checkbox\" label=\"자동로그인\" />\r\n                        </Form.Group>\r\n                        <div className=\"d-grid gap-2\">\r\n                            <Button variant=\"danger\" type=\"submit\">\r\n                                로그인\r\n                            </Button>\r\n                        </div>\r\n                        <span>\r\n                            <Link to=\"/user/confirmEmail\">비밀번호 재설정</Link>\r\n                            <Link to=\"/user/signup\">회원가입</Link>\r\n                        </span>\r\n                    </Form>\r\n\r\n                </Col>\r\n                <Col></Col>\r\n            </Row>\r\n        </Container>\r\n\r\n    );\r\n\r\n}\r\n\r\nexport  default  Login;"],"names":["tokenSlice","createSlice","name","initialState","authenticated","accessToken","expireTime","reducers","SET_TOKEN","state","action","payload","Date","getTime","DELETE_TOKEN","_tokenSlice$actions","actions","useDispatch","useSelector","navigate","useNavigate","kakaoOnSuccess","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","email","wrap","_context","prev","next","localStorage","setItem","response","access_token","profile","kakao_account","performCheck","sent","signUp","signIn","stop","_x","apply","arguments","_ref2","_callee2","_context2","abrupt","axios","get","then","res","catch","error","console","_x2","_ref3","_callee3","_context3","post","t0","_x3","_ref4","_callee4","_context4","setRefreshToken","refreshToken","log","_x4","test","_ref5","_callee5","_context5","_jsx","Container","className","children","_jsxs","Row","Col","md","span","offset","id","Image","src","logo","alt","class","KakaoLogin","token","onSuccess","onFail","alert","href","onClick","Form","Group","controlId","Label","Control","type","placeholder","Text","Check","label","Button","variant","Link","to"],"sourceRoot":""}